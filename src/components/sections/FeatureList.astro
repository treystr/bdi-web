---
import Button from '@components/ui/Button.astro';
import Eyebrow from '@components/ui/Eyebrow.astro';
import { getPaddingClass, getBackgroundColor, getTextColor } from '@utils/styleUtils';
import type { PaddingSize, ThemeColor } from '@utils/styleUtils';

export interface FeatureItem {
    emoji: string;
    title: string;
    description: string;
}

export interface Props {
    content: {
        eyebrow?: string;
        title?: string;
        description?: string;
        button?: {
            text: string;
            link: string;
            variant?: 'primary' | 'secondary' | 'ghostLight' | 'ghostDark';
        };
        features: FeatureItem[];
    };
    background?: ThemeColor;
    padding?: PaddingSize;
    paddingTop?: PaddingSize;
    paddingBottom?: PaddingSize;
    columns?: 1 | 2 | 3 | 4;
}

const {
    content: {
        eyebrow,
        title,
        description,
        button,
        features
    },
    background = 'base',
    columns = 2
} = Astro.props;

const bgColor = getBackgroundColor(background);
const textColor = getTextColor(background);
const paddingClass = getPaddingClass({ 
    padding: Astro.props.padding,
    paddingTop: Astro.props.paddingTop,
    paddingBottom: Astro.props.paddingBottom 
});
---

<section class:list={["relative", bgColor, paddingClass]}>
    <div class="site-container--content px-4">
        {(title || description) && (
            <div class="text-center mb-16 max-w-3xl mx-auto">
                {eyebrow && (
                    <Eyebrow 
                        text={eyebrow} 
                        background={background} 
                    />
                )}
                {title && (
                    <h2 class:list={[textColor]} data-aos="fade-up">
                        {title}
                    </h2>
                )}
                {description && (
                    <p class:list={["mt-4", textColor, "opacity-90"]} data-aos="fade-up" data-aos-delay="100">
                        {description}
                    </p>
                )}
                {button && (
                    <div class="mt-8" data-aos="fade-up" data-aos-delay="200">
                        <Button
                            href={button.link}
                            variant={button.variant || 'primary'}
                        >
                            {button.text}
                        </Button>
                    </div>
                )}
            </div>
        )}

        <div 
            class:list={[
                "grid gap-x-8 gap-y-12",
                columns === 1 && "grid-cols-1",
                columns === 2 && "grid-cols-1 md:grid-cols-2",
                columns === 3 && "grid-cols-1 md:grid-cols-2 lg:grid-cols-3",
                columns === 4 && "grid-cols-1 md:grid-cols-2 lg:grid-cols-4",
            ]}
        >
            {features.map((feature, index) => (
                <div 
                    class="flex gap-4 items-start"
                    data-aos="fade-up"
                    data-aos-delay={index * 50}
                >
                    <div 
                        class:list={[
                            "flex-shrink-0 w-16 h-16 rounded-full flex items-center justify-center",
                            background === 'dark' ? 'bg-background-base/20 border border-white/20' : 'bg-background/50 border border-black/10'
                        ]}
                    >
                        <span role="img" aria-label={feature.title} class="text-3xl">
                            {feature.emoji}
                        </span>
                    </div>
                    <div class="flex-1 pt-1">
                        <h3 class:list={["text-xl font-semibold mb-2", textColor]}>
                            {feature.title}
                        </h3>
                        <p class:list={["text-base leading-relaxed", textColor, "opacity-90"]}>
                            {feature.description}
                        </p>
                    </div>
                </div>
            ))}
        </div>
    </div>
</section>


