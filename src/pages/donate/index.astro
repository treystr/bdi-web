---
import Layout from "@layouts/Layout.astro"
import FullScreenHero from "@components/sections/FullScreenHero.astro"
import SplitPanel from "@components/sections/SplitPanel.astro"
import CtaBanner from "@components/sections/CtaBanner.astro"
import { Copy, Check } from 'lucide-astro'
import qrCodeImage from '../../assets/images/bd_wosQRZAP.png'
import heroImage from "@assets/images/hero/hero6.jpg"

const seoTitle = "Support Our Mission"
const seoDescription = "Support the Bitcoin District Initiative's mission to empower DC communities through Bitcoin education, privacy advocacy, and grassroots outreach. Your donation makes a huge difference."

const heroContent = {
    title: "Support Our Mission",
    backgroundImage: heroImage,
    description: "Help us empower Washington, DC communities through Bitcoin education and privacy advocacy. Zap us some sats to support our grassroots mission!",
    contentPosition: 'center',
    textAlign: 'center'
};

// Tax deductibility notice
const taxNotice = "The Bitcoin District Initiative is currently in the process of applying for 501(c)(3) tax-exempt status with the Internal Revenue Service. If our application is approved, donations made while our application is pending may be considered tax-deductible to the extent allowed by law. We encourage you to consult with your tax advisor for guidance on deducting your contribution."

// Main donation section with QR code
const donationSection = {
    eyebrow: "DONATE NOW",
    headline: "Zap Us on Lightning",
    subheadline: "Support Bitcoin Education in DC",
    description: "Scan the QR code with your Lightning wallet or send sats to our Lightning address below. Your contribution directly supports free workshops, community outreach, and privacy education across the DMV area.",
    image: {
        src: qrCodeImage,
        alt: "Bitcoin District Lightning donation QR code"
    }
}

// Lightning address for easy copying
const lightningAddress = "bitcoindistrict@walletofsatoshi.com"

// More options coming soon
const comingSoonCta = {
    eyebrow: "MORE OPTIONS",
    title: "Additional Donation Methods Coming Soon",
    description: "We're working on adding more ways to support our mission, including on-chain Bitcoin donations and traditional payment options. Check back soon for updates!",
    buttons: [
        {
            text: "Get Involved in Other Ways",
            link: "/get-involved",
            variant: "secondary" as const
        }
    ]
}

const FooterCta = {
    title: "More Ways to Support Our Mission",
    description: "Beyond financial contributions, you can volunteer your time, partner with us as a business, or help spread awareness about Bitcoin education in DC.",
    button: {
        text: "Explore All Ways to Get Involved",
        link: "/get-involved",
        variant: "ghostLight" as const
    },
    hideCta: true
}
---

<Layout footerCta={FooterCta} title={seoTitle} description={seoDescription} fullscreenHero={true}>
    <FullScreenHero content={heroContent} />
    
    <!-- Main QR Code Donation Section -->
    <SplitPanel 
        content={donationSection} 
        imagePosition="left" 
        background="base" 
        padding="large"
        imageAspect="square"
        imageFit="contain"
    >
        <!-- Copyable Lightning Address -->
        <div class="mt-6" data-aos="fade-up">
            <div class="flex items-center gap-2 bg-orange-50 border border-orange-300 rounded-lg p-4 group hover:bg-orange-100 transition-colors">
                <span class="font-mono text-sm flex-1 break-all text-gray-800" id="lightning-address">
                    {lightningAddress}
                </span>
                <button
                    id="copy-btn"
                    type="button"
                    class="flex-shrink-0 p-2 rounded-md hover:bg-orange-200 transition-colors focus:outline-none focus:ring-2 focus:ring-orange-400"
                    aria-label="Copy Lightning address"
                >
                    <Copy id="copy-icon" size={20} class="text-orange-700" />
                    <Check id="check-icon" size={20} class="text-green-600 hidden" />
                </button>
            </div>
        </div>

        <script>
            document.addEventListener('DOMContentLoaded', () => {
                const copyBtn = document.getElementById('copy-btn');
                const copyIcon = document.getElementById('copy-icon');
                const checkIcon = document.getElementById('check-icon');
                const addressText = document.getElementById('lightning-address');

                if (copyBtn && copyIcon && checkIcon && addressText) {
                    copyBtn.addEventListener('click', async () => {
                        try {
                            await navigator.clipboard.writeText(addressText.textContent?.trim() || '');
                            
                            // Show check icon
                            copyIcon.classList.add('hidden');
                            checkIcon.classList.remove('hidden');
                            
                            // Reset after 2 seconds
                            setTimeout(() => {
                                copyIcon.classList.remove('hidden');
                                checkIcon.classList.add('hidden');
                            }, 2000);
                        } catch (err) {
                            console.error('Failed to copy:', err);
                        }
                    });
                }
            });
        </script>
    </SplitPanel>
    
    <!-- Tax Deductibility Notice -->
    <section class="py-8 bg-yellow-50 border-y border-yellow-200">
        <div class="site-container px-4">
            <div class="max-w-4xl mx-auto text-center">
                <div class="bg-yellow-100 border border-yellow-300 p-6 rounded-lg">
                    <h3 class="text-lg font-semibold mb-3 text-yellow-800">Tax Deductibility Notice</h3>
                    <p class="text-sm text-yellow-700 leading-relaxed">
                        {taxNotice}
                    </p>
                </div>
            </div>
        </div>
    </section>
    
    <!-- More Options Coming Soon -->
    <CtaBanner
        content={comingSoonCta}
        variant="contained"
        background="light"
        padding="large"
    />
</Layout>