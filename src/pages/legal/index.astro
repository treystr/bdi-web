---
import Layout from '../../layouts/Layout.astro';
import { getCollection } from 'astro:content';
import PageHeader from '../../components/sections/PageHeader.astro';

const legalEntries = await getCollection('legal');

// Sort entries by title
const sortedEntries = legalEntries.sort((a, b) => a.data.title.localeCompare(b.data.title));

const pageHeaderContent = {
    title: 'Legal Information',
    description: 'Important policies and terms governing the use of our services'
};
---

<Layout title="Legal Information" description="Review the Bitcoin District Initiative's legal policies including terms of service, privacy policy, and other important legal information.">
    <PageHeader title={pageHeaderContent.title} description={pageHeaderContent.description} background="base" />

    <section class="py-xsmall">
        <div class="site-container--content px-8">
            <div class="space-y-6">
                {
                    sortedEntries.map((entry) => {
                        // Format the last updated date
                        const formattedDate = new Intl.DateTimeFormat('en-US', {
                            year: 'numeric',
                            month: 'long',
                            day: 'numeric',
                        }).format(entry.data.lastUpdated);

                        return (
                            <div class="border-b border-body-base/10 pb-6">
                                <a href={`/legal/${entry.id}`} class="group">
                                    <h2 class="text-medium group-hover:text-accent transition-colors">
                                        {entry.data.title}
                                    </h2>
                                    <p class="text-sm text-body-base/80 mt-2">Last updated: {formattedDate}</p>
                                </a>
                            </div>
                        );
                    })
                }
            </div>
        </div>
    </section>
</Layout>
